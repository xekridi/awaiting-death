{% extends "base.html" %}
{% load humanize static custom_filters %}

{% block content %}
<h2>Архив {{ archive.short_code }}</h2>

{% if archive.qr_image %}
<div class="mb-4">
    <img src="{{ archive.qr_image.url }}" alt="QR {{ archive.short_code }}" width="160">
</div>
{% endif %}

{% if not archive.ready %}
<div class="py-4 text-center">
    <p>Пожалуйста, подождите, архив собирается…</p>
</div>
{% else %}
<ul class="mb-4">
    {% for item in files %}
    <li>{{ item.file.name|basename }}</li>
    {% endfor %}
</ul>
{% if not file_exists %}
<p class="text-red-600">Файл удалён</p>
{% endif %}
<a href="{% url 'download-file' archive.short_code %}" class="btn btn-primary">
    Скачать архив
</a>
{% endif %}
{% endblock %}